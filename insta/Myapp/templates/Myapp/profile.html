{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>{{ user_profile.username }} Profile</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">

<style>
/* ===== GLOBAL ===== */
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial,sans-serif;
  background:#fafafa;
  color:#262626;
}

/* ===== PROFILE CONTAINER ===== */
.profile-container{
  max-width:935px;
  margin:30px auto;
  padding:0 20px;
  background:transparent;
}

/* ===== PROFILE TOP ===== */
.profile-top{
  display:flex;
  gap:60px;
  align-items:center;
  padding:30px 0;
  border-bottom:1px solid #dbdbdb;
}

/* ===== PROFILE PIC ===== */
.profile-pic img{
  width:150px;
  height:150px;
  border-radius:50%;
  object-fit:cover;
  border:1px solid #dbdbdb;
}

/* ===== PROFILE INFO ===== */
.profile-info{
  flex:1;
}

.profile-info h2{
  font-size:20px;
  font-weight:400;
  margin:0 0 12px;
}

/* ===== BUTTON ===== */
.profile-buttons{
  margin-bottom:12px;
}

.edit-btn{
  background:#efefef;
  color:#262626;
  padding:6px 16px;
  border:1px solid #dbdbdb;
  border-radius:8px;
  font-weight:600;
  cursor:pointer;
}

.edit-btn:hover{
  background:#e2e2e2;
}

/* ===== COUNTS ===== */
.follow-counts{
  display:flex;
  gap:40px;
  margin-bottom:12px;
  font-size:14px;
}

.follow-counts strong{
  font-weight:600;
}

/* ===== BIO ===== */
.user-bio{
  font-size:14px;
  line-height:1.4;
  max-width:350px;
}

/* ===== POSTS GRID ===== */
.post-gallery{
  display:grid;
  grid-template-columns:repeat(3,1fr);
  gap:4px;
  margin-top:20px;
}

.post-gallery img{
  width:100%;
  aspect-ratio:1/1;
  object-fit:cover;
  cursor:pointer;
}

/* ===== POPUP SMALL POLISH ===== */
.popup-content h3{
  font-size:18px;
  font-weight:600;
}

.popup-content input,
.popup-content textarea{
  font-size:14px;
}
.popup {
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.55);
  backdrop-filter: blur(6px);
  display: none;
  align-items: center;
  justify-content: center;
  z-index: 1000;
  transition:  1.3s ease;
}
.popup-content {
  width: 100%;
  max-width: 420px;
  background: linear-gradient(145deg, #ffffff, #f3f3f3);
  padding: 38px;
  border-radius: 16px;
  box-shadow:
    0 20px 40px rgba(0,0,0,0.25),
    inset 0 1px 0 rgba(255,255,255,0.6);
  position: relative;
  transform: translateY(20px) scale(0.95);
  animation: popUp 0.4s cubic-bezier(.17,.67,.32,1.34) forwards;
}
.close-btn {
  position: absolute;
  top: 14px;
  right: 16px;
  font-size: 26px;
  cursor: pointer;
  color: #888;
  transition: transform 0.3s, color 0.3s;
}

.close-btn:hover {
  color: #000;
  transform: rotate(90deg) scale(1.1);
}

/* ===== Title ===== */
.popup-content h3 {
  text-align: center;
  font-size: 22px;
  font-weight: 700;
  margin-bottom: 22px;
  letter-spacing: 0.5px;
}

/* ===== Inputs ===== */
.popup-content input[type="text"],
.popup-content textarea {
  width: 100%;
  padding: 12px 14px;
  border-radius: 10px;
  border: 1px solid #ddd;
  background: #fafafa;
  font-size: 14px;
  margin-bottom: 16px;
  transition: all 0.3s ease;
}

/* âœ¨ Focus Glow */
.popup-content input:focus,
.popup-content textarea:focus {
  outline: none;
  background: #fff;
  border-color: #0095f6;
  box-shadow: 0 0 0 3px rgba(0,149,246,0.2);
  transform: scale(1.02);
}

/* ===== Textarea ===== */
.popup-content textarea {
  height: 90px;
  resize: none;
}

/* ===== File Upload ===== */
.popup-content input[type="file"] {
  width: 100%;
  padding: 10px;
  background: #fff;
  border-radius: 10px;
  border: 1px dashed #ccc;
  cursor: pointer;
  margin-bottom: 18px;
  transition: border 0.3s, background 0.3s;
}

.popup-content input[type="file"]:hover {
  border-color: #0095f6;
  background: #f0f8ff;
}

/* ===== Save Button ===== */
.popup-content button {
  width: 100%;
  padding: 12px;
  border-radius: 30px;
  border: none;
  background: linear-gradient(135deg, #0095f6, #0064e0);
  color: #fff;
  font-size: 15px;
  font-weight: 700;
  cursor: pointer;
  transition: transform 0.25s ease, box-shadow 0.25s ease;
  position: relative;
  overflow: hidden;
}

/* ðŸ”¥ Hover Lift */
.popup-content button:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 25px rgba(0,149,246,0.4);
}

/* ðŸ”¥ Click Effect */
.popup-content button:active {
  transform: scale(0.96);
}


/* ===== MOBILE (INSTAGRAM STYLE) ===== */
@media (max-width:768px){

  .profile-top{
    flex-direction:column;
    gap:15px;
    text-align:center;
  }

  .profile-pic img{
    width:110px;
    height:110px;
  }

  .follow-counts{
    justify-content:center;
    gap:25px;
  }

  .user-bio{
    margin:0 auto;
  }

  .post-gallery{
    gap:2px;
  }

  /* popup bottom sheet */
  .popup-content{
    max-width:100%;
    border-radius:20px 20px 0 0;
    position:absolute;
    bottom:0;
  }
}
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 12px 18px;
  background: #fff;
  border-bottom: 1px solid #e6e6e6;
  position: sticky;
  top: 0;
  z-index: 1000;
  backdrop-filter: blur(10px);
  height: 60px;
}

.logo {
  display: flex;
  align-items: center;
  gap: 10px;
  cursor: pointer;
}

.logo i {
  font-size: clamp(20px, 5vw, 36px);
  color: #9b97d3;
}

.logo h2 {
 font-size: clamp(30px, 6vw, 44px);
  font-weight: 700;
  letter-spacing: 1.5px;
  background: linear-gradient(45deg, #0c0d0e, #000000);
  -webkit-background-clip: text;
  color: transparent;
  font-family: 'Franklin Gothic Medium', 'Arial Narrow', Arial, sans-serif;
}

@media (max-width: 900px) {
  .logo i {
    font-size: 25px !important; 
  }

  .logo h2 {
    font-size: 25px !important; 
  }
}



.header-right {
  display: flex;
  align-items: center;
  gap: 15px;
}
</style>
</head>

<body>
  
    <header class="header">
    <div class="logo">
      
      <a href="{%  url   'home'  %}" style="text-decoration:none;"> <i class="fa-solid fa-splotch"></i></a> 
        <a href="{%  url   'home'  %}" style="text-decoration:none;"> <h2 >ÉªÉ´êœ±á´›á´€á´˜á´œÊŸêœ±á´‡</h2></a>
    </div>


  </header>






<div class="profile-container">
  <div class="profile-top">

    <div class="profile-pic">
      {% if user_profile.profile.profile_pic %}
        <img src="{{ user_profile.profile.profile_pic.url }}">
      {% else %}
        <img src="{% static 'images/default-profile.png' %}">
      {% endif %}
    </div>

    <div class="profile-info">
      <h2>{{ user_profile.username }}</h2>

      <div class="profile-buttons">
        <button class="edit-btn" onclick="openPopup()">Edit Profile</button>
      </div>

      <div class="follow-counts">
        <span><strong>{{ posts|length }}</strong> Posts</span>
        <span><strong>{{ followers_count }}</strong> Followers</span>
        <span><strong>{{ following_count }}</strong> Following</span>
      </div>

      <div class="user-bio">
        {{ user_profile.profile.bio|default:"No bio yet" }}
      </div>
    </div>
  </div>

  <div class="post-gallery">
    {% for post in posts %}
      {% if post.image %}
        <img src="{{ post.image.url }}">
      {% endif %}
    {% empty %}
      <p>No posts yet</p>
    {% endfor %}
  </div>
</div>

<!-- POPUP -->
<div class="popup" id="editProfilePopup">
  <div class="popup-content">
    <span class="close-btn" onclick="closePopup()">&times;</span>

    <h3>Edit Profile</h3>

    <form method="POST" enctype="multipart/form-data">
      {% csrf_token %}

      <input type="text" name="username"
             value="{{ user_profile.username }}"
             placeholder="Username">

      <textarea name="bio" placeholder="Bio">{{ user_profile.profile.bio }}</textarea>

      <input type="file" name="profile_pic">

      <button type="submit">Save</button>
    </form>
  </div>
</div>

<script>
function openPopup(){
  document.getElementById("editProfilePopup").style.display="flex";
}

function closePopup(){
  document.getElementById("editProfilePopup").style.display="none";
}

window.onclick=function(e){
  let popup=document.getElementById("editProfilePopup");
  if(e.target===popup){
    popup.style.display="none";
  }
}
</script>

</body>
</html>
